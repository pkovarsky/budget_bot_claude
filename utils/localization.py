from typing import Dict, Any

# –°–ª–æ–≤–∞—Ä–∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
MESSAGES = {
    "ru": {
        # –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
        "welcome": "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Budget Bot, {name}! üéØ",
        "welcome_back": "–° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º, {name}! üëã",
        "help_commands": "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /help –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–æ–º–∞–Ω–¥.",
        
        # –ö–æ–º–∞–Ω–¥—ã
        "start_description": "–Ø –ø–æ–º–æ–≥—É –≤–∞–º –≤–µ—Å—Ç–∏ —É—á–µ—Ç –¥–æ—Ö–æ–¥–æ–≤ –∏ —Ä–∞—Å—Ö–æ–¥–æ–≤.",
        "help_title": "üéØ **Budget Bot - –ö–æ–º–∞–Ω–¥—ã:**",
        "commands_section": "**–ö–æ–º–∞–Ω–¥—ã:**",
        "transactions_section": "**–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π:**",
        "photo_section": "**üì∏ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —á–µ–∫–æ–≤:**",
        
        # –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
        "expense_added": "üí∏ –†–∞—Å—Ö–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω!",
        "income_added": "üí∞ –î–æ—Ö–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω!",
        "amount": "–°—É–º–º–∞",
        "category": "–ö–∞—Ç–µ–≥–æ—Ä–∏—è",
        "description": "–û–ø–∏—Å–∞–Ω–∏–µ",
        "transaction_error": "–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é. ü§î",
        "transaction_format_help": "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç: '35 –µ–≤—Ä–æ –ø—Ä–æ–¥—É–∫—Ç—ã' –∏–ª–∏ '+2000 –µ–≤—Ä–æ –∑–∞—Ä–ø–ª–∞—Ç–∞'",
        
        # –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
        "categories_title": "üìÅ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏",
        "choose_category": "–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é:",
        "suggest_category": "–ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è: **{category}**",
        "category_question": "–ü–æ–¥—Ö–æ–¥–∏—Ç –ª–∏ —ç—Ç–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è?",
        "yes": "‚úÖ –î–∞",
        "no": "‚ùå –ù–µ—Ç, –≤—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥—É—é",
        "category_added": "–ö–∞—Ç–µ–≥–æ—Ä–∏—è '{name}' –¥–æ–±–∞–≤–ª–µ–Ω–∞!",
        "category_exists": "–ö–∞—Ç–µ–≥–æ—Ä–∏—è '{name}' —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç",
        
        # –í–∞–ª—é—Ç—ã (–±–µ–∑ RUB)
        "supported_currencies": "EUR, USD",
        
        # –û—à–∏–±–∫–∏
        "start_first": "–°–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É /start",
        "error_occurred": "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.",
        
        # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
        "edit_transactions": "‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏",
        "select_period": "–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥:",
        "today": "üìÖ –°–µ–≥–æ–¥–Ω—è",
        "this_week": "üìÜ –≠—Ç–∞ –Ω–µ–¥–µ–ª—è", 
        "this_month": "üìä –≠—Ç–æ—Ç –º–µ—Å—è—Ü",
        "no_transactions": "–ù–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∑–∞ —ç—Ç–æ—Ç –ø–µ—Ä–∏–æ–¥",
        "select_transaction": "–í—ã–±–µ—Ä–∏—Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:",
        "edit_amount": "‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å —Å—É–º–º—É",
        "delete_transaction": "üóë –£–¥–∞–ª–∏—Ç—å",
        "transaction_deleted": "–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∞",
        "enter_new_amount": "–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—É—é —Å—É–º–º—É:",
        "amount_updated": "–°—É–º–º–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞",
        
        # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
        "settings": "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏",
        "language_settings": "üåç –Ø–∑—ã–∫",
        "name_settings": "üë§ –ò–º—è",
        "choose_language": "–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫:",
        "language_changed": "–Ø–∑—ã–∫ –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ —Ä—É—Å—Å–∫–∏–π",
        "enter_name": "–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è:",
        "name_updated": "–ò–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–æ: {name}",
        
        # –§–æ—Ç–æ
        "analyzing_receipt": "üì∏ –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é —á–µ–∫... –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥.",
        "receipt_processed": "‚úÖ –ß–µ–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω!",
        "receipt_error": "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å —á–µ–∫. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–æ—Ç–æ —á–µ—Ç–∫–æ–µ.",
    },
    
    "en": {
        # Basic commands
        "welcome": "Welcome to Budget Bot, {name}! üéØ",
        "welcome_back": "Welcome back, {name}! üëã",
        "help_commands": "Use /help to view commands.",
        
        # Commands
        "start_description": "I'll help you track your income and expenses.",
        "help_title": "üéØ **Budget Bot - Commands:**",
        "commands_section": "**Commands:**",
        "transactions_section": "**Adding transactions:**",
        "photo_section": "**üì∏ Receipt recognition:**",
        
        # Transactions
        "expense_added": "üí∏ Expense added!",
        "income_added": "üí∞ Income added!",
        "amount": "Amount",
        "category": "Category", 
        "description": "Description",
        "transaction_error": "Failed to recognize transaction. ü§î",
        "transaction_format_help": "Use format: '35 euros groceries' or '+2000 euros salary'",
        
        # Categories
        "categories_title": "üìÅ Manage categories",
        "choose_category": "Choose category:",
        "suggest_category": "Suggested category: **{category}**",
        "category_question": "Is this category suitable?",
        "yes": "‚úÖ Yes",
        "no": "‚ùå No, choose another",
        "category_added": "Category '{name}' added!",
        "category_exists": "Category '{name}' already exists",
        
        # Currencies (without RUB)
        "supported_currencies": "EUR, USD",
        
        # Errors
        "start_first": "Please run /start command first",
        "error_occurred": "An error occurred. Please try later.",
        
        # Editing
        "edit_transactions": "‚úèÔ∏è Edit transactions",
        "select_period": "Select period:",
        "today": "üìÖ Today",
        "this_week": "üìÜ This week",
        "this_month": "üìä This month", 
        "no_transactions": "No transactions for this period",
        "select_transaction": "Select transaction to edit:",
        "edit_amount": "‚úèÔ∏è Edit amount",
        "delete_transaction": "üóë Delete",
        "transaction_deleted": "Transaction deleted",
        "enter_new_amount": "Enter new amount:",
        "amount_updated": "Amount updated",
        
        # Settings
        "settings": "‚öôÔ∏è Settings",
        "language_settings": "üåç Language",
        "name_settings": "üë§ Name",
        "choose_language": "Choose language:",
        "language_changed": "Language changed to English",
        "enter_name": "Enter your name:",
        "name_updated": "Name updated: {name}",
        
        # Photo
        "analyzing_receipt": "üì∏ Analyzing receipt... This may take a few seconds.",
        "receipt_processed": "‚úÖ Receipt processed!",
        "receipt_error": "‚ùå Failed to recognize receipt. Make sure photo is clear.",
    },
    
    "uk": {
        # –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–∞–Ω–¥–∏
        "welcome": "–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –¥–æ Budget Bot, {name}! üéØ",
        "welcome_back": "–ó –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è–º, {name}! üëã",
        "help_commands": "–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ /help –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –∫–æ–º–∞–Ω–¥.",
        
        # –ö–æ–º–∞–Ω–¥–∏
        "start_description": "–Ø –¥–æ–ø–æ–º–æ–∂—É –≤–∞–º –≤–µ—Å—Ç–∏ –æ–±–ª—ñ–∫ –¥–æ—Ö–æ–¥—ñ–≤ —Ç–∞ –≤–∏—Ç—Ä–∞—Ç.",
        "help_title": "üéØ **Budget Bot - –ö–æ–º–∞–Ω–¥–∏:**",
        "commands_section": "**–ö–æ–º–∞–Ω–¥–∏:**",
        "transactions_section": "**–î–æ–¥–∞–≤–∞–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ–π:**",
        "photo_section": "**üì∏ –†–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è —á–µ–∫—ñ–≤:**",
        
        # –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó
        "expense_added": "üí∏ –í–∏—Ç—Ä–∞—Ç—É –¥–æ–¥–∞–Ω–æ!",
        "income_added": "üí∞ –î–æ—Ö—ñ–¥ –¥–æ–¥–∞–Ω–æ!",
        "amount": "–°—É–º–∞",
        "category": "–ö–∞—Ç–µ–≥–æ—Ä—ñ—è",
        "description": "–û–ø–∏—Å",
        "transaction_error": "–ù–µ –≤–¥–∞–ª–æ—Å—è —Ä–æ–∑–ø—ñ–∑–Ω–∞—Ç–∏ –æ–ø–µ—Ä–∞—Ü—ñ—é. ü§î",
        "transaction_format_help": "–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç: '35 —î–≤—Ä–æ –ø—Ä–æ–¥—É–∫—Ç–∏' –∞–±–æ '+2000 —î–≤—Ä–æ –∑–∞—Ä–ø–ª–∞—Ç–∞'",
        
        # –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó
        "categories_title": "üìÅ –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏",
        "choose_category": "–û–±–µ—Ä—ñ—Ç—å –∫–∞—Ç–µ–≥–æ—Ä—ñ—é:",
        "suggest_category": "–ó–∞–ø—Ä–æ–ø–æ–Ω–æ–≤–∞–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è: **{category}**",
        "category_question": "–ß–∏ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å —Ü—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—è?",
        "yes": "‚úÖ –¢–∞–∫",
        "no": "‚ùå –ù—ñ, –æ–±—Ä–∞—Ç–∏ —ñ–Ω—à—É",
        "category_added": "–ö–∞—Ç–µ–≥–æ—Ä—ñ—é '{name}' –¥–æ–¥–∞–Ω–æ!",
        "category_exists": "–ö–∞—Ç–µ–≥–æ—Ä—ñ—è '{name}' –≤–∂–µ —ñ—Å–Ω—É—î",
        
        # –í–∞–ª—é—Ç–∏ (–±–µ–∑ RUB)
        "supported_currencies": "EUR, USD",
        
        # –ü–æ–º–∏–ª–∫–∏
        "start_first": "–°–ø–µ—Ä—à—É –≤–∏–∫–æ–Ω–∞–π—Ç–µ –∫–æ–º–∞–Ω–¥—É /start",
        "error_occurred": "–°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞. –°–ø—Ä–æ–±—É–π—Ç–µ –ø—ñ–∑–Ω—ñ—à–µ.",
        
        # –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è
        "edit_transactions": "‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó",
        "select_period": "–û–±–µ—Ä—ñ—Ç—å –ø–µ—Ä—ñ–æ–¥:",
        "today": "üìÖ –°—å–æ–≥–æ–¥–Ω—ñ",
        "this_week": "üìÜ –¶–µ–π —Ç–∏–∂–¥–µ–Ω—å",
        "this_month": "üìä –¶–µ–π –º—ñ—Å—è—Ü—å",
        "no_transactions": "–ù–µ–º–∞—î —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π –∑–∞ —Ü–µ–π –ø–µ—Ä—ñ–æ–¥",
        "select_transaction": "–û–±–µ—Ä—ñ—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—é –¥–ª—è —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è:",
        "edit_amount": "‚úèÔ∏è –ó–º—ñ–Ω–∏—Ç–∏ —Å—É–º—É",
        "delete_transaction": "üóë –í–∏–¥–∞–ª–∏—Ç–∏",
        "transaction_deleted": "–¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—é –≤–∏–¥–∞–ª–µ–Ω–æ",
        "enter_new_amount": "–í–≤–µ–¥—ñ—Ç—å –Ω–æ–≤—É —Å—É–º—É:",
        "amount_updated": "–°—É–º—É –æ–Ω–æ–≤–ª–µ–Ω–æ",
        
        # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
        "settings": "‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è", 
        "language_settings": "üåç –ú–æ–≤–∞",
        "name_settings": "üë§ –Ü–º'—è",
        "choose_language": "–û–±–µ—Ä—ñ—Ç—å –º–æ–≤—É:",
        "language_changed": "–ú–æ–≤—É –∑–º—ñ–Ω–µ–Ω–æ –Ω–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫—É",
        "enter_name": "–í–≤–µ–¥—ñ—Ç—å –≤–∞—à–µ —ñ–º'—è:",
        "name_updated": "–Ü–º'—è –æ–Ω–æ–≤–ª–µ–Ω–æ: {name}",
        
        # –§–æ—Ç–æ
        "analyzing_receipt": "üì∏ –ê–Ω–∞–ª—ñ–∑—É—é —á–µ–∫... –¶–µ –º–æ–∂–µ –∑–∞–π–Ω—è—Ç–∏ –∫—ñ–ª—å–∫–∞ —Å–µ–∫—É–Ω–¥.",
        "receipt_processed": "‚úÖ –ß–µ–∫ –æ–±—Ä–æ–±–ª–µ–Ω–æ!",
        "receipt_error": "‚ùå –ù–µ –≤–¥–∞–ª–æ—Å—è —Ä–æ–∑–ø—ñ–∑–Ω–∞—Ç–∏ —á–µ–∫. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —Ñ–æ—Ç–æ —á—ñ—Ç–∫–µ.",
    }
}

# –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–æ–≤
DEFAULT_CATEGORIES = {
    "ru": ["–ü—Ä–æ–¥—É–∫—Ç—ã", "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç", "–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è", "–ó–¥–æ—Ä–æ–≤—å–µ", "–û–¥–µ–∂–¥–∞", "–ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏", "–†–µ—Å—Ç–æ—Ä–∞–Ω", "–ü—Ä–æ—á–µ–µ"],
    "en": ["Groceries", "Transport", "Entertainment", "Health", "Clothing", "Utilities", "Restaurant", "Other"],
    "uk": ["–ü—Ä–æ–¥—É–∫—Ç–∏", "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç", "–†–æ–∑–≤–∞–≥–∏", "–ó–¥–æ—Ä–æ–≤'—è", "–û–¥—è–≥", "–ö–æ–º—É–Ω–∞–ª—å–Ω—ñ –ø–æ—Å–ª—É–≥–∏", "–†–µ—Å—Ç–æ—Ä–∞–Ω", "–Ü–Ω—à–µ"]
}

def get_message(key: str, language: str = "ru", **kwargs) -> str:
    """–ü–æ–ª—É—á–∏—Ç—å –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"""
    if language not in MESSAGES:
        language = "ru"
    
    message = MESSAGES[language].get(key, MESSAGES["ru"].get(key, key))
    
    if kwargs:
        try:
            return message.format(**kwargs)
        except KeyError:
            return message
    
    return message

def get_default_categories(language: str = "ru") -> list:
    """–ü–æ–ª—É—á–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —è–∑—ã–∫–∞"""
    return DEFAULT_CATEGORIES.get(language, DEFAULT_CATEGORIES["ru"])

def get_supported_languages() -> Dict[str, str]:
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —è–∑—ã–∫–æ–≤"""
    return {
        "ru": "üá∑üá∫ –†—É—Å—Å–∫–∏–π",
        "en": "üá∫üá∏ English", 
        "uk": "üá∫üá¶ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞"
    }