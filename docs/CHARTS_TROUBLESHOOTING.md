# üìà –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ß–∞—Å—Ç—ã–µ –ø—Ä–∏—á–∏–Ω—ã, –ø–æ—á–µ–º—É –≥—Ä–∞—Ñ–∏–∫–∏ –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è:

1. **–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞**
   - –ù–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥
   - –í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ - –¥–æ—Ö–æ–¥—ã (–≥—Ä–∞—Ñ–∏–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ç–æ–ª—å–∫–æ —Ä–∞—Å—Ö–æ–¥—ã)
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

2. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**
   - –û—à–∏–±–∫–∏ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ matplotlib
   - –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞–º—è—Ç—å—é
   - –û—à–∏–±–∫–∏ –≤ –∫–æ–¥–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

3. **–ü—Ä–æ–±–ª–µ–º—ã —Å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏**
   - –ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ callback'–æ–≤
   - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥

## üîß –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:
```bash
python debug_charts.py
```

–í–≤–µ–¥–∏—Ç–µ –≤–∞—à Telegram ID (–Ω–∞–π—Ç–∏ –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ @userinfobot –≤ Telegram).

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å:
- ‚úÖ –ú–∏–Ω–∏–º—É–º 1-2 —Ä–∞—Å—Ö–æ–¥–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- ‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7-30 –¥–Ω–µ–π
- ‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º–∏ —Å—É–º–º–∞–º–∏ (—Ä–∞—Å—Ö–æ–¥—ã)

**–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:**
```
25 EUR –ø—Ä–æ–¥—É–∫—Ç—ã
15 EUR —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç
30 EUR —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–∞–Ω–¥ –≤ –±–æ—Ç–µ

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É `/charts`
2. –í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π —Ç–∏–ø –≥—Ä–∞—Ñ–∏–∫–∞
3. –í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 30 –¥–Ω–µ–π)

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ë–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "‚è≥ –ì–µ–Ω–µ—Ä–∏—Ä—É—é –≥—Ä–∞—Ñ–∏–∫..."
- –ß–µ—Ä–µ–∑ 5-10 —Å–µ–∫—É–Ω–¥ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ –≥–ª–∞–≤–Ω–æ–º—É –º–µ–Ω—é –≥—Ä–∞—Ñ–∏–∫–æ–≤

### –®–∞–≥ 4: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

–ï—Å–ª–∏ `/charts` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:
- `/stats` - —Å—Ç–∞—Ä–∞—è –∫–æ–º–∞–Ω–¥–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ ‚Üí –ì—Ä–∞—Ñ–∏–∫–∏

## üö® –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

### –û—à–∏–±–∫–∞: "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥

**–†–µ—à–µ–Ω–∏–µ:**
1. –í—ã–±–µ—Ä–∏—Ç–µ –±–æ–ª—å—à–∏–π –ø–µ—Ä–∏–æ–¥ (90 –¥–Ω–µ–π –≤–º–µ—Å—Ç–æ 7)
2. –î–æ–±–∞–≤—å—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞—Å—Ö–æ–¥–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏–º–µ—é—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —Å—É–º–º—ã

### –û—à–∏–±–∫–∞: "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≥—Ä–∞—Ñ–∏–∫–∞"

**–ü—Ä–∏—á–∏–Ω–∞:** –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ –∫–æ–¥–µ

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
3. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É —Å –ª–æ–≥–∞–º–∏

### –û—à–∏–±–∫–∞: –ö–Ω–æ–ø–∫–∏ –Ω–µ —Ä–µ–∞–≥–∏—Ä—É—é—Ç

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ–Ω—Ñ–ª–∏–∫—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ callback'–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é –∫–æ–¥–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:

**–ü—Ä–æ–≤–µ—Ä–∫–∞ matplotlib:**
```bash
python -c "import matplotlib; matplotlib.use('Agg'); import matplotlib.pyplot as plt; print('OK')"
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –≥—Ä–∞—Ñ–∏–∫–∞:**
```bash
python test_charts.py
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –≤ bot.py:**
```python
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ—Å—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã
from handlers.charts_handler import charts_command, handle_charts_callback

# –ò –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
application.add_handler(CommandHandler("charts", charts_command))
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ callback'–æ–≤:**
```python
# –í —Ñ—É–Ω–∫—Ü–∏–∏ handle_callback_query —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
elif (data.startswith("chart_") or data == "back_to_charts" or 
      data.startswith("period_") or data.startswith("monthly_")):
    await handle_charts_callback(update, context)
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:

–î–æ–±–∞–≤—å—Ç–µ –≤ chart_service.py:
```python
import logging
logger = logging.getLogger(__name__)

# –í –Ω–∞—á–∞–ª–µ –∫–∞–∂–¥–æ–≥–æ –º–µ—Ç–æ–¥–∞:
logger.info(f"–ì–µ–Ω–µ—Ä–∏—Ä—É—é –≥—Ä–∞—Ñ–∏–∫ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}, –ø–µ—Ä–∏–æ–¥ {period_days}")
```

## üìä –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫

- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- [ ] –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- [ ] –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å —Ä–∞—Å—Ö–æ–¥–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- [ ] –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/charts` –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞
- [ ] –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ callback'–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] Matplotlib –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö

## üîÑ –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç

1. **–î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:**
   ```
   25 EUR –ø—Ä–æ–¥—É–∫—Ç—ã
   15 EUR —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç  
   30 EUR —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–º–∞–Ω–¥—É:**
   ```
   /charts ‚Üí ü•ß –†–∞—Å—Ö–æ–¥—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º ‚Üí üìÖ 30 –¥–Ω–µ–π
   ```

3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –ö—Ä–∞—Å–∏–≤–∞—è –∫—Ä—É–≥–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ —Å —Ç–µ–º–Ω—ã–º —Ñ–æ–Ω–æ–º
   - –ü–æ–¥–ø–∏—Å–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å —Å—É–º–º–∞–º–∏
   - –ü—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ

## üìû –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è:

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É:**
   ```bash
   python debug_charts.py
   ```

2. **–°–æ–±–µ—Ä–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:**
   - –í–∞—à Telegram ID
   - –ö–æ–º–∞–Ω–¥–∞, –∫–æ—Ç–æ—Ä—É—é –≤—ã–ø–æ–ª–Ω—è–ª–∏
   - –¢–æ—á–Ω—ã–π —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏
   - –õ–æ–≥–∏ –±–æ—Ç–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø)

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é –∫–æ–¥–∞
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã

–ì—Ä–∞—Ñ–∏–∫ –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –∑–∞ 5-10 —Å–µ–∫—É–Ω–¥ –∏ –≤—ã–≥–ª—è–¥–µ—Ç—å –∫–∞–∫ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ —Å —Ç–µ–º–Ω—ã–º —Ñ–æ–Ω–æ–º –∏ —è—Ä–∫–∏–º–∏ —Ü–≤–µ—Ç–∞–º–∏.